name: Deploy to Netlify

on:
  push:
    branches:
      - main  # Déclenche l'action sur les pushs vers la branche principale

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Set up Node.js (si tu utilises Node.js pour ton site)
      uses: actions/setup-node@v3
      with:
        node-version: '16'  # Version de Node.js que tu utilises

    - name: Install dependencies
      run: |
        npm install  # Si tu utilises npm, sinon adapte cette commande à ton projet

    - name: Build the site
      run: |
        npm run build  # Ou la commande appropriée pour ton projet (ex. `gatsby build`, `next build`, etc.)

    - name: Deploy to Netlify
      uses: netlify/actions/cli@v3  # Action officielle Netlify CLI
      with:
        args: deploy --dir=./dist --site ${{ secrets.NETLIFY_SITE_ID }} --auth ${{ secrets.NETLIFY_AUTH_TOKEN }}
